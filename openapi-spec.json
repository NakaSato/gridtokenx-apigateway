{"openapi":"3.1.0","info":{"title":"GridTokenX Platform API","description":"API Gateway for GridTokenX Platform","contact":{"name":"Engineering Department","email":"wit.chanthawat@gmail.com"},"license":{"name":"MIT"},"version":"0.1.1"},"servers":[{"url":"http://localhost:8080","description":"Local development server"},{"url":"https://api.gridtokenx.com","description":"Production server"}],"paths":{"/api/admin/governance/emergency-pause":{"post":{"tags":["governance"],"summary":"Emergency pause the system (admin only)\nPOST /api/admin/governance/emergency-pause","operationId":"emergency_pause","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmergencyPauseRequest"}}},"required":true},"responses":{"200":{"description":"Emergency pause initiated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmergencyActionResponse"}}}},"400":{"description":"Invalid request or empty reason"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"},"404":{"description":"User not found"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/admin/governance/unpause":{"post":{"tags":["governance"],"summary":"Emergency unpause the system (admin only)\nPOST /api/admin/governance/unpause","operationId":"emergency_unpause","responses":{"200":{"description":"Emergency unpause initiated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmergencyActionResponse"}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"},"404":{"description":"User not found"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/admin/market/analytics":{"get":{"tags":["Admin - Market"],"summary":"Get detailed trading analytics","operationId":"get_trading_analytics","responses":{"200":{"description":"Trading analytics retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TradingAnalytics"}}}},"403":{"description":"Admin access required"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/admin/market/control":{"post":{"tags":["Admin - Market"],"summary":"Execute market control actions (admin only)","operationId":"market_control","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MarketControlRequest"}}},"required":true},"responses":{"200":{"description":"Market control action executed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MarketControlResponse"}}}},"403":{"description":"Admin access required"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/admin/market/health":{"get":{"tags":["Admin - Market"],"summary":"Get comprehensive market health status","operationId":"get_market_health","responses":{"200":{"description":"Market health retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MarketHealth"}}}},"403":{"description":"Admin access required"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/admin/meters/mint-from-reading":{"post":{"tags":["meters"],"summary":"Mint tokens from a meter reading (admin only)\nPOST /api/admin/meters/mint-from-reading","description":"This endpoint mints energy tokens based on a submitted meter reading","operationId":"mint_from_reading","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MintFromReadingRequest"}}},"required":true},"responses":{"200":{"description":"Tokens minted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MintResponse"}}}},"400":{"description":"Invalid request or reading already minted"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"},"404":{"description":"Reading not found"},"500":{"description":"Internal server error or blockchain minting failed"}},"security":[{"bearer_auth":[]}]}},"/api/admin/meters/unminted":{"get":{"tags":["meters"],"summary":"Get unminted readings (admin only)\nGET /api/admin/meters/unminted","operationId":"get_unminted_readings","parameters":[{"name":"page","in":"query","description":"Page number (1-indexed)","required":false,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"page_size","in":"query","description":"Number of items per page (max 100)","required":false,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"sort_by","in":"query","description":"Sort field: \"submitted_at\", \"reading_timestamp\", \"kwh_amount\"","required":false,"schema":{"type":["string","null"]}},{"name":"sort_order","in":"query","description":"Sort direction: \"asc\" or \"desc\"","required":false,"schema":{"$ref":"#/components/schemas/SortOrder"}},{"name":"minted","in":"query","description":"Filter by minted status","required":false,"schema":{"type":["boolean","null"]}}],"responses":{"200":{"description":"List of unminted meter readings","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MeterReadingResponse"}}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/admin/tokens/mint":{"post":{"tags":["tokens"],"summary":"Mint energy tokens (admin only)\nPOST /api/admin/tokens/mint","operationId":"mint_tokens","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MintTokensRequest"}}},"required":true},"responses":{"200":{"description":"Tokens minted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MintTokensResponse"}}}},"400":{"description":"Invalid request or amount"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"},"404":{"description":"User not found"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/admin/trading/match-orders":{"post":{"tags":["trading"],"summary":"Trigger order matching on blockchain (admin only)\nPOST /api/admin/trading/match-orders","operationId":"match_blockchain_orders","responses":{"200":{"description":"Order matching initiated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MatchOrdersResponse"}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"},"404":{"description":"User not found"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/admin/users/{id}/update-role":{"post":{"tags":["registry"],"summary":"Update user role/status (admin only)\nPOST /api/admin/users/:id/update-role","operationId":"update_user_role","parameters":[{"name":"id","in":"path","description":"User ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserRoleRequest"}}},"required":true},"responses":{"200":{"description":"User role update initiated"},"400":{"description":"Invalid request or user has no wallet"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"},"404":{"description":"User not found"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/auth/login":{"post":{"tags":["auth"],"summary":"Login handler","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecureAuthResponse"}}}},"400":{"description":"Validation error"},"401":{"description":"Invalid credentials"},"403":{"description":"Email not verified"}}}},"/api/auth/login-with-wallet":{"post":{"tags":["Authentication"],"summary":"Login with wallet information","operationId":"login_with_wallet","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Login successful with wallet information","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WalletLoginResponse"}}}},"400":{"description":"Invalid request data"},"401":{"description":"Invalid credentials or account inactive"},"500":{"description":"Internal server error during login"}}}},"/api/auth/password":{"post":{"tags":["auth"],"summary":"Change password","operationId":"change_password","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordRequest"}}},"required":true},"responses":{"204":{"description":"Password changed successfully"},"400":{"description":"Validation error or incorrect current password"},"401":{"description":"Unauthorized"},"404":{"description":"User not found"}},"security":[{"bearer_auth":[]}]}},"/api/auth/profile":{"get":{"tags":["auth"],"summary":"Get current user profile","operationId":"get_profile","responses":{"200":{"description":"User profile retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInfo"}}}},"401":{"description":"Unauthorized"},"404":{"description":"User not found"}},"security":[{"bearer_auth":[]}]},"post":{"tags":["auth"],"summary":"Update user profile","operationId":"update_profile","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProfileRequest"}}},"required":true},"responses":{"200":{"description":"Profile updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInfo"}}}},"400":{"description":"Validation error or no fields to update"},"401":{"description":"Unauthorized"},"404":{"description":"User not found"}},"security":[{"bearer_auth":[]}]}},"/api/auth/register":{"post":{"tags":["auth"],"summary":"Enhanced user registration with email verification","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"201":{"description":"User registered successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterResponse"}}}},"400":{"description":"Validation error or user already exists"},"500":{"description":"Failed to send verification email"}}}},"/api/auth/register-with-wallet":{"post":{"tags":["Authentication"],"summary":"Enhanced registration with automatic wallet creation","operationId":"register_with_wallet","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WalletRegistrationRequest"}}},"required":true},"responses":{"200":{"description":"User registered successfully with optional wallet","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WalletRegistrationResponse"}}}},"400":{"description":"Invalid registration data or user already exists"},"500":{"description":"Internal server error during registration or wallet creation"}}}},"/api/auth/resend-verification":{"post":{"tags":["auth"],"summary":"Resend verification email to a user","description":"POST /api/auth/resend-verification\n\nThis endpoint:\n1. Validates the user exists and is not already verified\n2. Checks rate limiting (prevents abuse)\n3. Generates a new verification token\n4. Sends a new verification email\n5. Updates the token expiration time","operationId":"resend_verification","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResendVerificationRequest"}}},"required":true},"responses":{"200":{"description":"Verification email sent successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResendVerificationResponse"}}}},"400":{"description":"Invalid email or already verified"},"404":{"description":"User not found"},"429":{"description":"Too many requests - rate limit exceeded"}}}},"/api/auth/verify-email":{"get":{"tags":["auth"],"summary":"Verify a user's email address using the verification token","description":"GET /api/auth/verify-email?token={token}\n\nThis endpoint:\n1. Validates the token format and existence\n2. Checks if the token has expired\n3. Updates the user's email_verified status\n4. Invalidates the token (one-time use)\n5. Optionally returns a JWT token for immediate login","operationId":"verify_email","parameters":[{"name":"token","in":"query","description":"Email verification token","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Email verified successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyEmailResponse"}}}},"400":{"description":"Invalid or expired token"},"410":{"description":"Token expired"}}}},"/api/blockchain/users/{wallet_address}":{"get":{"tags":["registry"],"summary":"Get blockchain user account by wallet address\nGET /api/blockchain/users/:wallet_address","operationId":"get_blockchain_user","parameters":[{"name":"wallet_address","in":"path","description":"Solana wallet address (base58)","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Blockchain user account information","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlockchainUserAccount"}}}},"400":{"description":"Invalid wallet address"},"401":{"description":"Unauthorized"},"404":{"description":"User account not found on blockchain"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/erc/issue":{"post":{"tags":["erc"],"summary":"Issue a new ERC certificate","operationId":"issue_certificate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IssueErcRequest"}}},"required":true},"responses":{"200":{"description":"Certificate issued successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErcCertificateResponse"}}}},"400":{"description":"Invalid request data"},"403":{"description":"Requires REC authority role"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/erc/my-certificates":{"get":{"tags":["erc"],"summary":"Get current user's certificates with pagination","operationId":"get_my_certificates","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"sort_by","in":"query","required":false,"schema":{"type":["string","null"]}},{"name":"sort_order","in":"query","required":false,"schema":{"$ref":"#/components/schemas/SortOrder"}},{"name":"status","in":"query","required":false,"schema":{"type":["string","null"]}}],"responses":{"200":{"description":"User's certificates","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CertificatesResponse"}}}},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/erc/my-stats":{"get":{"tags":["erc"],"summary":"Get certificate statistics for current user","operationId":"get_my_certificate_stats","responses":{"200":{"description":"Certificate statistics","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CertificateStatsResponse"}}}},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/erc/wallet/{wallet_address}":{"get":{"tags":["erc"],"summary":"Get certificates by wallet address","operationId":"get_certificates_by_wallet","parameters":[{"name":"wallet_address","in":"path","description":"Wallet address","required":true,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"Maximum certificates to return (default: 50)","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","description":"Number of certificates to skip (default: 0)","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"List of certificates","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ErcCertificateResponse"}}}}},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/erc/{certificate_id}":{"get":{"tags":["erc"],"summary":"Get certificate by ID","operationId":"get_certificate","parameters":[{"name":"certificate_id","in":"path","description":"Certificate ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Certificate details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErcCertificateResponse"}}}},"404":{"description":"Certificate not found"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/erc/{certificate_id}/retire":{"post":{"tags":["erc"],"summary":"Retire a certificate (admin/owner only)","operationId":"retire_certificate","parameters":[{"name":"certificate_id","in":"path","description":"Certificate ID to retire","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Certificate retired successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErcCertificateResponse"}}}},"403":{"description":"Not authorized to retire this certificate"},"404":{"description":"Certificate not found"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/governance/status":{"get":{"tags":["governance"],"summary":"Get governance status from blockchain\nGET /api/governance/status","operationId":"get_governance_status","responses":{"200":{"description":"Governance system status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GovernanceStatusResponse"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Governance config not found on blockchain"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/meters/my-readings":{"get":{"tags":["meters"],"summary":"Get meter readings for current user\nGET /api/meters/my-readings","operationId":"get_my_readings","parameters":[{"name":"page","in":"query","description":"Page number (1-indexed)","required":false,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"page_size","in":"query","description":"Number of items per page (max 100)","required":false,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"sort_by","in":"query","description":"Sort field: \"submitted_at\", \"reading_timestamp\", \"kwh_amount\"","required":false,"schema":{"type":["string","null"]}},{"name":"sort_order","in":"query","description":"Sort direction: \"asc\" or \"desc\"","required":false,"schema":{"$ref":"#/components/schemas/SortOrder"}},{"name":"minted","in":"query","description":"Filter by minted status","required":false,"schema":{"type":["boolean","null"]}}],"responses":{"200":{"description":"List of user's meter readings","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MeterReadingResponse"}}}}},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/meters/readings/{wallet_address}":{"get":{"tags":["meters"],"summary":"Get meter readings by wallet address\nGET /api/meters/readings/:wallet_address","operationId":"get_readings_by_wallet","parameters":[{"name":"wallet_address","in":"path","description":"Solana wallet address","required":true,"schema":{"type":"string"}},{"name":"page","in":"query","description":"Page number (1-indexed)","required":false,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"page_size","in":"query","description":"Number of items per page (max 100)","required":false,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"sort_by","in":"query","description":"Sort field: \"submitted_at\", \"reading_timestamp\", \"kwh_amount\"","required":false,"schema":{"type":["string","null"]}},{"name":"sort_order","in":"query","description":"Sort direction: \"asc\" or \"desc\"","required":false,"schema":{"$ref":"#/components/schemas/SortOrder"}},{"name":"minted","in":"query","description":"Filter by minted status","required":false,"schema":{"type":["boolean","null"]}}],"responses":{"200":{"description":"Meter readings for specified wallet","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MeterReadingResponse"}}}}},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/meters/stats":{"get":{"tags":["meters"],"summary":"Get user statistics\nGET /api/meters/stats","operationId":"get_user_stats","responses":{"200":{"description":"User meter reading statistics","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserStatsResponse"}}}},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/meters/submit-reading":{"post":{"tags":["meters"],"summary":"Submit a new meter reading\nPOST /api/meters/submit-reading","description":"Prosumers submit their smart meter readings for token minting","operationId":"submit_reading","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmitReadingRequest"}}},"required":true},"responses":{"200":{"description":"Meter reading submitted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MeterReadingResponse"}}}},"400":{"description":"Invalid reading data or wallet not set"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Only prosumers can submit readings"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/oracle/data":{"get":{"tags":["oracle"],"summary":"Get oracle data from blockchain\nGET /api/oracle/data","operationId":"get_oracle_data","responses":{"200":{"description":"Oracle blockchain data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OracleDataResponse"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Oracle data not found on blockchain"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/oracle/prices":{"post":{"tags":["oracle"],"summary":"Submit price data to oracle\nPOST /api/oracle/prices","operationId":"submit_price","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmitPriceRequest"}}},"required":true},"responses":{"200":{"description":"Price data submitted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PriceSubmissionResponse"}}}},"400":{"description":"Invalid price or energy type"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"},"404":{"description":"User not found"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/oracle/prices/current":{"get":{"tags":["oracle"],"summary":"Get current price data\nGET /api/oracle/prices/current","operationId":"get_current_prices","responses":{"200":{"description":"Current energy prices","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CurrentPriceData"}}}}},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/test/statistics":{"get":{"tags":["testing"],"summary":"Get test statistics\nGET /api/test/statistics","operationId":"get_test_statistics","responses":{"200":{"description":"Test statistics retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestStatisticsResponse"}}}},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/test/transactions":{"post":{"tags":["testing"],"summary":"Create a test transaction\nPOST /api/test/transactions","description":"For testing blockchain functionality in non-production environments","operationId":"create_test_transaction","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTestTransactionRequest"}}},"required":true},"responses":{"200":{"description":"Test transaction created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestTransactionResponse"}}}},"400":{"description":"Invalid request"},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/test/transactions/{signature}":{"get":{"tags":["testing"],"summary":"Get test transaction status\nGET /api/test/transactions/{signature}","operationId":"get_test_transaction_status","parameters":[{"name":"signature","in":"path","description":"Transaction signature","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Transaction status retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestTransactionResponse"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Transaction not found"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/tokens/balance/{wallet_address}":{"get":{"tags":["tokens"],"summary":"Get token balance for a wallet address\nGET /api/tokens/balance/:wallet_address","operationId":"get_token_balance","parameters":[{"name":"wallet_address","in":"path","description":"Solana wallet address (base58)","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Token balance information","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenBalanceResponse"}}}},"400":{"description":"Invalid wallet address"},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/tokens/info":{"get":{"tags":["tokens"],"summary":"Get token program info from blockchain\nGET /api/tokens/info","operationId":"get_token_info","responses":{"200":{"description":"Token program information","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenInfoResponse"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Token info not found on blockchain"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/tokens/mint-from-reading":{"post":{"tags":["tokens"],"summary":"Mint tokens from a meter reading\nPOST /api/tokens/mint-from-reading","description":"Allows users to mint energy tokens based on their submitted meter readings","operationId":"mint_from_reading","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MintFromReadingRequest"}}},"required":true},"responses":{"200":{"description":"Tokens minted from reading successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MintFromReadingResponse"}}}},"400":{"description":"Invalid request, reading already minted, or reading too old"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Can only mint own readings"},"404":{"description":"Reading not found"},"500":{"description":"Internal server error or blockchain minting failed"}},"security":[{"bearer_auth":[]}]}},"/api/trading/market/blockchain":{"get":{"tags":["trading"],"summary":"Get blockchain trading market data\nGET /api/trading/market/blockchain","operationId":"get_blockchain_market_data","responses":{"200":{"description":"Blockchain market data from Solana","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlockchainMarketData"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Trading market not found on blockchain"},"500":{"description":"Blockchain communication error"}},"security":[{"bearer_auth":[]}]}},"/api/trading/orders/blockchain":{"post":{"tags":["trading"],"summary":"Create order on blockchain\nPOST /api/trading/orders/blockchain","operationId":"create_blockchain_order","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBlockchainOrderRequest"}}},"required":true},"responses":{"200":{"description":"Blockchain order created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBlockchainOrderResponse"}}}},"400":{"description":"Invalid order parameters"},"401":{"description":"Unauthorized"},"500":{"description":"Blockchain transaction failed"}},"security":[{"bearer_auth":[]}]}},"/api/user/wallet":{"post":{"tags":["users"],"summary":"Update wallet address for current user","operationId":"update_wallet_address","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateWalletRequest"}}},"required":true},"responses":{"200":{"description":"Wallet address updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInfo"}}}},"400":{"description":"Invalid wallet address format"},"401":{"description":"Unauthorized"},"404":{"description":"User not found"}},"security":[{"bearer_auth":[]}]},"delete":{"tags":["users"],"summary":"Remove wallet address for current user","operationId":"remove_wallet_address","responses":{"204":{"description":"Wallet address removed successfully"},"401":{"description":"Unauthorized"},"404":{"description":"User not found"}},"security":[{"bearer_auth":[]}]}},"/api/users":{"get":{"tags":["users"],"summary":"List users with search and pagination (admin only)","operationId":"list_users","parameters":[{"name":"search","in":"query","description":"Search term for username, email, first name, or last name","required":false,"schema":{"type":["string","null"]}},{"name":"role","in":"query","description":"Filter by role","required":false,"schema":{"type":["string","null"]}},{"name":"page","in":"query","description":"Page number (1-indexed)","required":false,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"page_size","in":"query","description":"Number of items per page (max 100)","required":false,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"sort_by","in":"query","description":"Sort field: \"created_at\", \"username\", \"email\"","required":false,"schema":{"type":["string","null"]}},{"name":"sort_order","in":"query","description":"Sort direction: \"asc\" or \"desc\"","required":false,"schema":{"$ref":"#/components/schemas/SortOrder"}}],"responses":{"200":{"description":"Users list retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserListResponse"}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin/Faculty access required"}},"security":[{"bearer_auth":[]}]}},"/api/users/{id}":{"get":{"tags":["users"],"summary":"Get user by ID (admin only)","operationId":"get_user","parameters":[{"name":"id","in":"path","description":"User ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"User found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInfo"}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"},"404":{"description":"User not found"}},"security":[{"bearer_auth":[]}]},"put":{"tags":["users"],"summary":"Admin: Update any user (requires admin role)","operationId":"admin_update_user","parameters":[{"name":"id","in":"path","description":"User ID to update","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminUpdateUserRequest"}}},"required":true},"responses":{"200":{"description":"User updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInfo"}}}},"400":{"description":"Validation error or invalid role"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"},"404":{"description":"User not found"}},"security":[{"bearer_auth":[]}]}},"/api/users/{id}/activity":{"get":{"tags":["users"],"summary":"Get user activity log (admin only)","operationId":"get_user_activity","parameters":[{"name":"id","in":"path","description":"User ID to get activity for","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"page","in":"query","description":"Page number","required":false,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"per_page","in":"query","description":"Items per page","required":false,"schema":{"type":"integer","format":"int32","minimum":0}}],"responses":{"200":{"description":"User activity retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserActivityResponse"}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required or can only view own activity"},"404":{"description":"User not found"}},"security":[{"bearer_auth":[]}]}},"/api/users/{id}/deactivate":{"post":{"tags":["users"],"summary":"Admin: Deactivate user (soft delete)","operationId":"admin_deactivate_user","parameters":[{"name":"id","in":"path","description":"User ID to deactivate","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"User deactivated successfully"},"400":{"description":"Cannot deactivate own account"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"},"404":{"description":"User not found"}},"security":[{"bearer_auth":[]}]}},"/api/users/{id}/reactivate":{"post":{"tags":["users"],"summary":"Admin: Reactivate user","operationId":"admin_reactivate_user","parameters":[{"name":"id","in":"path","description":"User ID to reactivate","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"User reactivated successfully"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"},"404":{"description":"User not found"}},"security":[{"bearer_auth":[]}]}},"/api/v1/blockchain/accounts/{address}":{"get":{"tags":["blockchain"],"summary":"Get account information for a given address\nGET /api/v1/blockchain/accounts/:address","operationId":"get_account_info","parameters":[{"name":"address","in":"path","description":"Solana account address (base58)","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Account information","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountInfo"}}}},"400":{"description":"Invalid address format"},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/blockchain/network":{"get":{"tags":["blockchain"],"summary":"Get current network status\nGET /api/v1/blockchain/network","operationId":"get_network_status","responses":{"200":{"description":"Current blockchain network status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NetworkStatus"}}}},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/blockchain/programs/{name}":{"post":{"tags":["blockchain"],"summary":"Interact with a specific smart contract program\nPOST /api/v1/blockchain/programs/:name","operationId":"interact_with_program","parameters":[{"name":"name","in":"path","description":"Program name (registry, trading, energy-token, oracle, governance)","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProgramInteractionRequest"}}},"required":true},"responses":{"200":{"description":"Program interaction submitted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"400":{"description":"Invalid program name or request"},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/blockchain/transactions":{"get":{"tags":["blockchain"],"summary":"Get transaction history for the authenticated user\nGET /api/v1/blockchain/transactions","operationId":"get_transaction_history","parameters":[{"name":"program_id","in":"query","required":false,"schema":{"type":["string","null"]}},{"name":"status","in":"query","required":false,"schema":{"type":["string","null"]}},{"name":"start_time","in":"query","required":false,"schema":{"type":["string","null"],"format":"date-time"}},{"name":"end_time","in":"query","required":false,"schema":{"type":["string","null"],"format":"date-time"}},{"name":"limit","in":"query","required":false,"schema":{"type":["integer","null"],"format":"int32"}},{"name":"offset","in":"query","required":false,"schema":{"type":["integer","null"],"format":"int32"}}],"responses":{"200":{"description":"List of user's blockchain transactions","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionStatus"}}}}},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]},"post":{"tags":["blockchain"],"summary":"Submit a blockchain transaction\nPOST /api/v1/blockchain/transactions","operationId":"submit_transaction","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionSubmission"}}},"required":true},"responses":{"200":{"description":"Transaction submitted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"400":{"description":"Invalid transaction data"},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/blockchain/transactions/{signature}":{"get":{"tags":["blockchain"],"summary":"Get specific transaction status by signature\nGET /api/v1/blockchain/transactions/:signature","operationId":"get_transaction_status","parameters":[{"name":"signature","in":"path","description":"Transaction signature","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Transaction status details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionStatus"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Transaction not found"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/trading/market":{"get":{"tags":["trading"],"summary":"Get current market data\nGET /api/v1/trading/market","operationId":"get_market_data","responses":{"200":{"description":"Current market data including order book","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MarketData"}}}},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/trading/orders":{"get":{"tags":["trading"],"summary":"Get user's trading orders\nGET /api/v1/trading/orders","operationId":"get_user_orders","parameters":[{"name":"status","in":"query","description":"Filter by order status","required":false,"schema":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/OrderStatus"}]}},{"name":"side","in":"query","description":"Filter by order side (buy/sell)","required":false,"schema":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/OrderSide"}]}},{"name":"page","in":"query","description":"Page number (1-indexed)","required":false,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"page_size","in":"query","description":"Number of items per page (max 100)","required":false,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"sort_by","in":"query","description":"Sort field: \"created_at\", \"price_per_kwh\", \"energy_amount\"","required":false,"schema":{"type":["string","null"]}},{"name":"sort_order","in":"query","description":"Sort direction: \"asc\" or \"desc\"","required":false,"schema":{"$ref":"#/components/schemas/SortOrder"}}],"responses":{"200":{"description":"List of user's trading orders","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TradingOrder"}}}}},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]},"post":{"tags":["trading"],"summary":"Create a new trading order\nPOST /api/v1/trading/orders","operationId":"create_order","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderRequest"}}},"required":true},"responses":{"200":{"description":"Order created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderResponse"}}}},"400":{"description":"Invalid order parameters"},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/trading/stats":{"get":{"tags":["trading"],"operationId":"get_trading_stats","responses":{"200":{"description":"Trading statistics for authenticated user","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TradingStats"}}}},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/ws/stats":{"get":{"tags":["websocket"],"summary":"Get WebSocket connection statistics","operationId":"websocket_stats","responses":{"200":{"description":"WebSocket statistics"}},"security":[{"bearer_auth":[]}]}},"/health":{"get":{"tags":["health"],"summary":"Basic health check endpoint","operationId":"health_check","responses":{"200":{"description":"Service is healthy","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthStatus"}}}}}}},"/ws":{"get":{"tags":["websocket"],"summary":"Authenticated WebSocket endpoint for trading","description":"Provides real-time updates for authenticated users:\n- Order updates\n- Match notifications\n- Epoch transitions\n- Personal trading events\n\nRequires token authentication via query parameter","operationId":"websocket_handler","parameters":[{"name":"token","in":"query","description":"JWT authentication token","required":true,"schema":{"type":"string"}}],"responses":{"101":{"description":"WebSocket connection upgraded"},"401":{"description":"Unauthorized - Invalid or missing token"},"500":{"description":"Internal server error"}}}}},"components":{"schemas":{"AccountInfo":{"type":"object","description":"Account information response","required":["address","balance","executable","owner","rent_epoch","data_length"],"properties":{"address":{"type":"string"},"balance":{"type":"string"},"data_length":{"type":"integer","minimum":0},"executable":{"type":"boolean"},"owner":{"type":"string"},"rent_epoch":{"type":"integer","format":"int64","minimum":0}}},"ActivityListResponse":{"type":"object","required":["activities","total","page","per_page","total_pages"],"properties":{"activities":{"type":"array","items":{"$ref":"#/components/schemas/UserActivity"}},"page":{"type":"integer","format":"int32","minimum":0},"per_page":{"type":"integer","format":"int32","minimum":0},"total":{"type":"integer","format":"int64","minimum":0},"total_pages":{"type":"integer","format":"int32","minimum":0}}},"ActivityQuery":{"type":"object","properties":{"page":{"type":["integer","null"],"format":"int32","minimum":0},"per_page":{"type":["integer","null"],"format":"int32","minimum":0}}},"AdminUpdateUserRequest":{"type":"object","description":"Admin user update request","properties":{"blockchain_registered":{"type":["boolean","null"]},"email":{"type":["string","null"]},"first_name":{"type":["string","null"]},"is_active":{"type":["boolean","null"]},"last_name":{"type":["string","null"]},"role":{"type":["string","null"]},"wallet_address":{"type":["string","null"]}}},"BasicUserInfo":{"type":"object","description":"Basic user information for registration response","required":["username","email","role"],"properties":{"email":{"type":"string"},"role":{"type":"string"},"username":{"type":"string"}}},"BlockchainMarketData":{"type":"object","description":"Trading market data from blockchain","required":["authority","active_orders","total_volume","total_trades","market_fee_bps","clearing_enabled","created_at"],"properties":{"active_orders":{"type":"integer","format":"int64","minimum":0},"authority":{"type":"string"},"clearing_enabled":{"type":"boolean"},"created_at":{"type":"integer","format":"int64"},"market_fee_bps":{"type":"integer","format":"int32","minimum":0},"total_trades":{"type":"integer","format":"int64","minimum":0},"total_volume":{"type":"integer","format":"int64","minimum":0}}},"BlockchainMeterAccount":{"type":"object","description":"Meter account data from blockchain","required":["meter_id","owner","meter_type","status","registered_at","last_reading_at","total_generation","total_consumption","settled_net_generation","claimed_erc_generation"],"properties":{"claimed_erc_generation":{"type":"integer","format":"int64","minimum":0},"last_reading_at":{"type":"integer","format":"int64"},"meter_id":{"type":"string"},"meter_type":{"$ref":"#/components/schemas/MeterType"},"owner":{"type":"string"},"registered_at":{"type":"integer","format":"int64"},"settled_net_generation":{"type":"integer","format":"int64","minimum":0},"status":{"$ref":"#/components/schemas/MeterStatus"},"total_consumption":{"type":"integer","format":"int64","minimum":0},"total_generation":{"type":"integer","format":"int64","minimum":0}}},"BlockchainUserAccount":{"type":"object","description":"User account data from blockchain","required":["authority","user_type","location","status","registered_at","meter_count"],"properties":{"authority":{"type":"string"},"location":{"type":"string"},"meter_count":{"type":"integer","format":"int32","minimum":0},"registered_at":{"type":"integer","format":"int64"},"status":{"$ref":"#/components/schemas/UserStatus"},"user_type":{"$ref":"#/components/schemas/UserType"}}},"CertificateStatsResponse":{"type":"object","required":["total_certificates","active_kwh","retired_kwh","total_kwh"],"properties":{"active_kwh":{"type":"string"},"retired_kwh":{"type":"string"},"total_certificates":{"type":"integer","format":"int64"},"total_kwh":{"type":"string"}}},"CertificatesResponse":{"type":"object","required":["data","pagination"],"properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/ErcCertificateResponse"}},"pagination":{"$ref":"#/components/schemas/PaginationMeta"}}},"ChangePasswordRequest":{"type":"object","description":"Password change request","required":["current_password","new_password"],"properties":{"current_password":{"type":"string","example":"OldPassword123!"},"new_password":{"type":"string","example":"NewSecurePassword456!"}}},"Claims":{"type":"object","description":"User claims for JWT tokens","required":["sub","username","role","exp","iat","iss"],"properties":{"exp":{"type":"integer","format":"int64"},"iat":{"type":"integer","format":"int64"},"iss":{"type":"string"},"role":{"type":"string"},"sub":{"type":"string","format":"uuid"},"username":{"type":"string"}}},"CreateBlockchainOrderRequest":{"type":"object","description":"Create blockchain order request","required":["order_type","energy_amount","price_per_kwh"],"properties":{"energy_amount":{"type":"integer","format":"int64","minimum":0},"order_type":{"type":"string"},"price_per_kwh":{"type":"integer","format":"int64","minimum":0}}},"CreateBlockchainOrderResponse":{"type":"object","description":"Create blockchain order response","required":["success","message","order_type","energy_amount","price_per_kwh"],"properties":{"energy_amount":{"type":"integer","format":"int64","minimum":0},"message":{"type":"string"},"order_type":{"type":"string"},"price_per_kwh":{"type":"integer","format":"int64","minimum":0},"success":{"type":"boolean"},"transaction_signature":{"type":["string","null"]}}},"CreateOrderRequest":{"type":"object","required":["energy_amount","price_per_kwh","order_type"],"properties":{"energy_amount":{"type":"number","format":"double"},"expiry_time":{"type":["string","null"],"format":"date-time"},"order_type":{"$ref":"#/components/schemas/OrderType"},"price_per_kwh":{"type":"number","format":"double"}}},"CreateOrderResponse":{"type":"object","description":"Response for order creation","required":["id","status","created_at","message"],"properties":{"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"message":{"type":"string"},"status":{"$ref":"#/components/schemas/OrderStatus"}}},"CreateTestTransactionRequest":{"type":"object","description":"Test transaction request","required":["transaction_type"],"properties":{"test_data":{"description":"Optional test data"},"transaction_type":{"type":"string","description":"Test transaction type"}}},"CreateUserRequest":{"type":"object","required":["username","role","department"],"properties":{"department":{"type":"string"},"email":{"type":["string","null"]},"role":{"$ref":"#/components/schemas/UserRole"},"username":{"type":"string"}}},"CurrentPriceData":{"type":"object","description":"Current price data","required":["energy_type","price_per_kwh","last_updated","source"],"properties":{"energy_type":{"type":"string"},"last_updated":{"type":"integer","format":"int64"},"price_per_kwh":{"type":"number","format":"double"},"source":{"type":"string"}}},"DevWalletInfo":{"type":"object","description":"Development wallet information (DO NOT USE IN PRODUCTION)","required":["address","balance_lamports","balance_sol","private_key","created_new"],"properties":{"address":{"type":"string"},"airdrop_signature":{"type":["string","null"]},"balance_lamports":{"type":"integer","format":"int64","minimum":0},"balance_sol":{"type":"number","format":"double"},"created_new":{"type":"boolean"},"private_key":{"type":"string"}}},"EmergencyActionResponse":{"type":"object","description":"Emergency action response","required":["success","message","paused","timestamp"],"properties":{"message":{"type":"string"},"paused":{"type":"boolean"},"success":{"type":"boolean"},"timestamp":{"type":"integer","format":"int64"}}},"EmergencyPauseRequest":{"type":"object","description":"Emergency pause request","required":["reason"],"properties":{"reason":{"type":"string"}}},"EnergyMetadata":{"type":"object","required":["location","device_type"],"properties":{"device_type":{"type":"string"},"location":{"type":"string"},"weather_conditions":{"type":["string","null"]}}},"EnergyReading":{"type":"object","required":["meter_id","timestamp","energy_generated","energy_consumed","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"energy_consumed":{"type":"number","format":"double"},"energy_generated":{"type":"number","format":"double"},"id":{"type":["string","null"],"format":"uuid"},"metadata":{},"meter_id":{"type":"string"},"solar_irradiance":{"type":["number","null"],"format":"double"},"temperature":{"type":["number","null"],"format":"double"},"timestamp":{"type":"string","format":"date-time"}}},"EnergyReadingSubmission":{"type":"object","required":["meter_id","timestamp","energy_generated","energy_consumed","engineering_authority_signature"],"properties":{"energy_consumed":{"type":"number","format":"double"},"energy_generated":{"type":"number","format":"double"},"engineering_authority_signature":{"type":"string"},"metadata":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/EnergyMetadata"}]},"meter_id":{"type":"string"},"solar_irradiance":{"type":["number","null"],"format":"double"},"temperature":{"type":["number","null"],"format":"double"},"timestamp":{"type":"string","format":"date-time"}}},"ErcCertificateResponse":{"type":"object","required":["id","certificate_id","wallet_address","kwh_amount","status"],"properties":{"blockchain_tx_signature":{"type":["string","null"]},"certificate_id":{"type":"string"},"expiry_date":{"type":["string","null"],"format":"date-time"},"id":{"type":"string","format":"uuid"},"issue_date":{"type":["string","null"],"format":"date-time"},"issuer_wallet":{"type":["string","null"]},"kwh_amount":{"type":"string"},"metadata":{},"status":{"type":"string"},"user_id":{"type":["string","null"],"format":"uuid"},"wallet_address":{"type":"string"}}},"GetCertificatesQuery":{"type":"object","properties":{"page":{"type":"integer","format":"int32","minimum":0},"page_size":{"type":"integer","format":"int32","minimum":0},"sort_by":{"type":["string","null"]},"sort_order":{"$ref":"#/components/schemas/SortOrder"},"status":{"type":["string","null"]}}},"GetReadingsQuery":{"type":"object","properties":{"minted":{"type":["boolean","null"],"description":"Filter by minted status"},"page":{"type":"integer","format":"int32","description":"Page number (1-indexed)","minimum":0},"page_size":{"type":"integer","format":"int32","description":"Number of items per page (max 100)","minimum":0},"sort_by":{"type":["string","null"],"description":"Sort field: \"submitted_at\", \"reading_timestamp\", \"kwh_amount\""},"sort_order":{"$ref":"#/components/schemas/SortOrder","description":"Sort direction: \"asc\" or \"desc\""}}},"GovernanceStatusResponse":{"type":"object","description":"Governance status response","required":["authority","authority_name","emergency_paused","maintenance_mode","erc_validation_enabled","total_ercs_issued","total_ercs_validated","total_energy_certified","is_operational","created_at","last_updated"],"properties":{"authority":{"type":"string"},"authority_name":{"type":"string"},"created_at":{"type":"integer","format":"int64"},"emergency_paused":{"type":"boolean"},"erc_validation_enabled":{"type":"boolean"},"is_operational":{"type":"boolean"},"last_updated":{"type":"integer","format":"int64"},"maintenance_mode":{"type":"boolean"},"total_energy_certified":{"type":"integer","format":"int64","minimum":0},"total_ercs_issued":{"type":"integer","format":"int64","minimum":0},"total_ercs_validated":{"type":"integer","format":"int64","minimum":0}}},"HealthResponse":{"type":"object","required":["status","timestamp"],"properties":{"status":{"type":"string"},"timestamp":{"type":"string"}}},"HealthStatus":{"type":"object","required":["status","timestamp","version","environment","dependencies"],"properties":{"dependencies":{"type":"array","items":{"$ref":"#/components/schemas/ServiceHealth"}},"environment":{"type":"string"},"status":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"version":{"type":"string"}}},"HourlyVolume":{"type":"object","description":"Hourly volume data","required":["hour","volume","trade_count"],"properties":{"hour":{"type":"string"},"trade_count":{"type":"integer","format":"int64"},"volume":{"type":"string"}}},"IssueErcRequest":{"type":"object","required":["wallet_address","kwh_amount"],"properties":{"expiry_date":{"type":["string","null"],"format":"date-time"},"kwh_amount":{"type":"string"},"metadata":{},"wallet_address":{"type":"string"}}},"LoginRequest":{"type":"object","description":"Login request","required":["username","password"],"properties":{"password":{"type":"string","example":"SecurePassword123!","maxLength":128,"minLength":8},"username":{"type":"string","example":"john_doe","maxLength":50,"minLength":3}}},"MarketAction":{"type":"string","description":"Market actions","enum":["pause_trading","resume_trading","clear_order_book","trigger_matching"]},"MarketControlRequest":{"type":"object","description":"Market control request","required":["action"],"properties":{"action":{"$ref":"#/components/schemas/MarketAction"}}},"MarketControlResponse":{"type":"object","description":"Market control response","required":["success","message","timestamp"],"properties":{"message":{"type":"string"},"success":{"type":"boolean"},"timestamp":{"type":"string"}}},"MarketData":{"type":"object","required":["current_epoch","epoch_start_time","epoch_end_time","status","order_book","recent_trades"],"properties":{"current_epoch":{"type":"integer","format":"int64","minimum":0},"epoch_end_time":{"type":"string","format":"date-time"},"epoch_start_time":{"type":"string","format":"date-time"},"order_book":{"$ref":"#/components/schemas/OrderBook"},"recent_trades":{"type":"array","items":{"$ref":"#/components/schemas/TradeExecution"}},"status":{"type":"string"}}},"MarketHealth":{"type":"object","description":"Market health status","required":["status","order_book_health","matching_stats","settlement_stats","websocket_connections","timestamp"],"properties":{"matching_stats":{"$ref":"#/components/schemas/MatchingStatistics"},"order_book_health":{"$ref":"#/components/schemas/OrderBookHealth"},"settlement_stats":{"$ref":"#/components/schemas/SettlementStatistics"},"status":{"type":"string"},"timestamp":{"type":"string"},"websocket_connections":{"type":"integer","minimum":0}}},"MatchOrdersResponse":{"type":"object","description":"Match orders response","required":["success","message","matched_orders","total_volume"],"properties":{"matched_orders":{"type":"integer","format":"int32","minimum":0},"message":{"type":"string"},"success":{"type":"boolean"},"total_volume":{"type":"integer","format":"int64","minimum":0}}},"MatchingStatistics":{"type":"object","description":"Matching statistics","required":["total_matches_24h","total_volume_24h","average_price_24h","pending_orders"],"properties":{"average_price_24h":{"type":"string"},"last_match_time":{"type":["string","null"]},"pending_orders":{"type":"integer","format":"int64"},"total_matches_24h":{"type":"integer","format":"int64"},"total_volume_24h":{"type":"string"}}},"MeterReadingResponse":{"type":"object","required":["id","user_id","wallet_address","kwh_amount","reading_timestamp","submitted_at","minted"],"properties":{"id":{"type":"string","format":"uuid"},"kwh_amount":{"type":"string"},"mint_tx_signature":{"type":["string","null"]},"minted":{"type":"boolean"},"reading_timestamp":{"type":"string","format":"date-time"},"submitted_at":{"type":"string","format":"date-time"},"user_id":{"type":"string","format":"uuid"},"wallet_address":{"type":"string"}}},"MeterStatus":{"type":"string","description":"Meter status enum matching the Registry program","enum":["active","inactive","maintenance"]},"MeterType":{"type":"string","description":"Meter type enum matching the Registry program","enum":["solar","wind","battery","grid"]},"MintFromReadingRequest":{"type":"object","description":"Mint from meter reading request","required":["reading_id"],"properties":{"reading_id":{"type":"string","format":"uuid"}}},"MintFromReadingResponse":{"type":"object","description":"Mint from meter reading response","required":["success","transaction_signature","reading_id","tokens_minted","wallet_address"],"properties":{"reading_id":{"type":"string","format":"uuid"},"success":{"type":"boolean"},"tokens_minted":{"type":"string"},"transaction_signature":{"type":"string"},"wallet_address":{"type":"string"}}},"MintResponse":{"type":"object","required":["success","transaction_signature","reading_id","kwh_amount"],"properties":{"kwh_amount":{"type":"string"},"reading_id":{"type":"string","format":"uuid"},"success":{"type":"boolean"},"transaction_signature":{"type":"string"}}},"MintTokensRequest":{"type":"object","description":"Mint tokens request (admin only)","required":["wallet_address","amount"],"properties":{"amount":{"type":"integer","format":"int64","minimum":0},"wallet_address":{"type":"string"}}},"MintTokensResponse":{"type":"object","description":"Mint tokens response","required":["success","message","wallet_address","amount"],"properties":{"amount":{"type":"integer","format":"int64","minimum":0},"message":{"type":"string"},"success":{"type":"boolean"},"transaction_signature":{"type":["string","null"]},"wallet_address":{"type":"string"}}},"NetworkStatus":{"type":"object","description":"Network status response","required":["cluster","block_height","block_time","tps","health","version"],"properties":{"block_height":{"type":"integer","format":"int64","minimum":0},"block_time":{"type":"string","format":"date-time"},"cluster":{"type":"string"},"health":{"type":"string"},"tps":{"type":"number","format":"double"},"version":{"type":"string"}}},"OracleDataResponse":{"type":"object","description":"Oracle data from blockchain","required":["authority","api_gateway","total_readings","last_reading_timestamp","last_clearing","active","created_at"],"properties":{"active":{"type":"boolean"},"api_gateway":{"type":"string"},"authority":{"type":"string"},"created_at":{"type":"integer","format":"int64"},"last_clearing":{"type":"integer","format":"int64"},"last_reading_timestamp":{"type":"integer","format":"int64"},"total_readings":{"type":"integer","format":"int64","minimum":0}}},"OrderBook":{"type":"object","required":["sell_orders","buy_orders"],"properties":{"buy_orders":{"type":"array","items":{"$ref":"#/components/schemas/TradingOrder"}},"sell_orders":{"type":"array","items":{"$ref":"#/components/schemas/TradingOrder"}}}},"OrderBookData":{"type":"object","description":"Order book data structure","required":["buys","sells"],"properties":{"buys":{"type":"array","items":{"$ref":"#/components/schemas/OrderBookEntry"}},"sells":{"type":"array","items":{"$ref":"#/components/schemas/OrderBookEntry"}}}},"OrderBookEntry":{"type":"object","description":"Order book entry","required":["price","quantity","order_count"],"properties":{"order_count":{"type":"integer","format":"int32"},"price":{"type":"string"},"quantity":{"type":"string"}}},"OrderBookHealth":{"type":"object","description":"Order book health metrics","required":["buy_orders_count","sell_orders_count","total_buy_volume","total_sell_volume","liquidity_score"],"properties":{"best_ask":{"type":["string","null"]},"best_bid":{"type":["string","null"]},"buy_orders_count":{"type":"integer","minimum":0},"liquidity_score":{"type":"number","format":"double"},"sell_orders_count":{"type":"integer","minimum":0},"spread":{"type":["string","null"]},"spread_percentage":{"type":["number","null"],"format":"double"},"total_buy_volume":{"type":"string"},"total_sell_volume":{"type":"string"}}},"OrderQuery":{"type":"object","description":"Query parameters for trading orders","properties":{"page":{"type":"integer","format":"int32","description":"Page number (1-indexed)","minimum":0},"page_size":{"type":"integer","format":"int32","description":"Number of items per page (max 100)","minimum":0},"side":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/OrderSide","description":"Filter by order side (buy/sell)"}]},"sort_by":{"type":["string","null"],"description":"Sort field: \"created_at\", \"price_per_kwh\", \"energy_amount\""},"sort_order":{"$ref":"#/components/schemas/SortOrder","description":"Sort direction: \"asc\" or \"desc\""},"status":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/OrderStatus","description":"Filter by order status"}]}}},"OrderSide":{"type":"string","enum":["Buy","Sell"]},"OrderStatus":{"type":"string","enum":["Pending","Active","PartiallyFilled","Filled","Settled","Cancelled","Expired"]},"OrderType":{"type":"string","enum":["Market","Limit"]},"PaginationMeta":{"type":"object","description":"Pagination metadata for responses","required":["current_page","total_pages","total_items","items_per_page","has_next","has_previous"],"properties":{"current_page":{"type":"integer","format":"int32","description":"Current page number (1-indexed)","minimum":0},"has_next":{"type":"boolean","description":"Whether there is a next page"},"has_previous":{"type":"boolean","description":"Whether there is a previous page"},"items_per_page":{"type":"integer","format":"int32","description":"Number of items per page","minimum":0},"total_items":{"type":"integer","format":"int64","description":"Total number of items across all pages"},"total_pages":{"type":"integer","format":"int32","description":"Total number of pages","minimum":0}}},"PriceStatistics":{"type":"object","description":"Price statistics","properties":{"change_24h":{"type":["string","null"]},"change_percentage_24h":{"type":["number","null"],"format":"double"},"close_24h":{"type":["string","null"]},"current_price":{"type":["string","null"]},"high_24h":{"type":["string","null"]},"low_24h":{"type":["string","null"]},"open_24h":{"type":["string","null"]}}},"PriceSubmissionResponse":{"type":"object","description":"Response for price submission","required":["success","message","energy_type","price_per_kwh","timestamp"],"properties":{"energy_type":{"type":"string"},"message":{"type":"string"},"price_per_kwh":{"type":"number","format":"double"},"success":{"type":"boolean"},"timestamp":{"type":"integer","format":"int64"}}},"ProgramInteraction":{"type":"object","required":["program_id","instruction_name","success"],"properties":{"instruction_name":{"type":"string"},"program_id":{"type":"string"},"success":{"type":"boolean"}}},"ProgramInteractionRequest":{"type":"object","description":"Program interaction request","required":["program_name","instruction","accounts","data"],"properties":{"accounts":{"type":"array","items":{"type":"string"}},"compute_units":{"type":["integer","null"],"format":"int32","minimum":0},"data":{},"instruction":{"type":"string"},"program_name":{"type":"string"}}},"RegisterRequest":{"type":"object","description":"user registration request with additional validation","required":["username","email","password","role","first_name","last_name"],"properties":{"email":{"type":"string","example":"john.doe@example.com"},"first_name":{"type":"string","example":"John"},"last_name":{"type":"string","example":"Doe"},"password":{"type":"string","example":"SecurePassword123!"},"role":{"type":"string","example":"user"},"username":{"type":"string","example":"john_doe"}},"additionalProperties":false},"RegisterResponse":{"type":"object","description":"Registration response (without JWT - pending email verification)","required":["message","user","email_verification_sent","verification_required"],"properties":{"email_verification_sent":{"type":"boolean"},"message":{"type":"string"},"user":{"$ref":"#/components/schemas/BasicUserInfo"},"verification_required":{"type":"boolean"}}},"ResendVerificationRequest":{"type":"object","required":["email"],"properties":{"email":{"type":"string","example":"john.doe@example.com"}}},"ResendVerificationResponse":{"type":"object","required":["message","email","sent_at","expires_in_hours"],"properties":{"email":{"type":"string"},"expires_in_hours":{"type":"integer","format":"int64"},"message":{"type":"string"},"sent_at":{"type":"string"},"status":{"type":["string","null"],"description":"Status of the verification: \"already_verified\", \"expired_resent\", \"sent\""}}},"SecureAuthResponse":{"type":"object","description":"Secure authentication response (excludes sensitive user data)","required":["access_token","token_type","expires_in","user"],"properties":{"access_token":{"type":"string"},"expires_in":{"type":"integer","format":"int64"},"token_type":{"type":"string"},"user":{"$ref":"#/components/schemas/SecureUserInfo"}}},"SecureUserInfo":{"type":"object","description":"Secure user information for login responses (excludes sensitive data)","required":["username","email","role","blockchain_registered"],"properties":{"blockchain_registered":{"type":"boolean"},"email":{"type":"string"},"role":{"type":"string"},"username":{"type":"string"}}},"ServiceHealth":{"type":"object","required":["name","status","last_check"],"properties":{"error_message":{"type":["string","null"]},"last_check":{"type":"string","format":"date-time"},"name":{"type":"string"},"response_time_ms":{"type":["integer","null"],"format":"int64","minimum":0},"status":{"type":"string"}}},"SettlementStatistics":{"type":"object","description":"Settlement statistics","required":["pending_count","processing_count","confirmed_count","failed_count","total_settled_value"],"properties":{"confirmed_count":{"type":"integer","format":"int64"},"failed_count":{"type":"integer","format":"int64"},"pending_count":{"type":"integer","format":"int64"},"processing_count":{"type":"integer","format":"int64"},"total_settled_value":{"type":"string"}}},"SortOrder":{"type":"string","enum":["asc","desc"]},"SubmitPriceRequest":{"type":"object","description":"Request to submit a price update (for future price oracle functionality)","required":["energy_type","price_per_kwh"],"properties":{"energy_type":{"type":"string"},"price_per_kwh":{"type":"number","format":"double"},"timestamp":{"type":["integer","null"],"format":"int64"}}},"SubmitReadingRequest":{"type":"object","required":["kwh_amount","reading_timestamp"],"properties":{"kwh_amount":{"type":"string"},"meter_signature":{"type":["string","null"]},"reading_timestamp":{"type":"string","format":"date-time"}}},"TestStatisticsResponse":{"type":"object","description":"Test statistics response","required":["total_test_transactions","successful_transactions","failed_transactions","average_execution_time_ms"],"properties":{"average_execution_time_ms":{"type":"number","format":"double"},"failed_transactions":{"type":"integer","format":"int64"},"successful_transactions":{"type":"integer","format":"int64"},"total_test_transactions":{"type":"integer","format":"int64"}}},"TestTransactionResponse":{"type":"object","description":"Test transaction response","required":["id","signature","status","transaction_type","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"id":{"type":"string"},"signature":{"type":"string"},"status":{"type":"string"},"transaction_type":{"type":"string"}}},"TokenBalanceResponse":{"type":"object","description":"Token balance response","required":["wallet_address","token_balance","token_balance_raw","balance_sol","decimals","token_mint","token_account"],"properties":{"balance_sol":{"type":"number","format":"double"},"decimals":{"type":"integer","format":"int32","minimum":0},"token_account":{"type":"string"},"token_balance":{"type":"string"},"token_balance_raw":{"type":"integer","format":"int64","minimum":0},"token_mint":{"type":"string"},"wallet_address":{"type":"string"}}},"TokenInfoResponse":{"type":"object","description":"Token info from blockchain","required":["authority","mint","total_supply","created_at"],"properties":{"authority":{"type":"string"},"created_at":{"type":"integer","format":"int64"},"mint":{"type":"string"},"total_supply":{"type":"integer","format":"int64","minimum":0}}},"TradeExecution":{"type":"object","required":["id","buyer_id","seller_id","energy_amount","price_per_kwh","total_price","executed_at"],"properties":{"buyer_id":{"type":"string","format":"uuid"},"energy_amount":{"type":"number","format":"double"},"executed_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"price_per_kwh":{"type":"number","format":"double"},"seller_id":{"type":"string","format":"uuid"},"total_price":{"type":"number","format":"double"}}},"TraderStats":{"type":"object","description":"Trader statistics","required":["user_id","total_trades","total_volume","buy_volume","sell_volume"],"properties":{"buy_volume":{"type":"string"},"sell_volume":{"type":"string"},"total_trades":{"type":"integer","format":"int64"},"total_volume":{"type":"string"},"user_id":{"type":"string"}}},"TradingAnalytics":{"type":"object","description":"Trading analytics","required":["total_trades","total_volume","total_value","average_trade_size","price_statistics","top_traders","hourly_volume"],"properties":{"average_trade_size":{"type":"string"},"hourly_volume":{"type":"array","items":{"$ref":"#/components/schemas/HourlyVolume"}},"price_statistics":{"$ref":"#/components/schemas/PriceStatistics"},"top_traders":{"type":"array","items":{"$ref":"#/components/schemas/TraderStats"}},"total_trades":{"type":"integer","format":"int64"},"total_value":{"type":"string"},"total_volume":{"type":"string"}}},"TradingOrder":{"type":"object","required":["id","user_id","order_type","side","energy_amount","price_per_kwh","filled_amount","status","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"energy_amount":{"type":"number","format":"double"},"expires_at":{"type":["string","null"],"format":"date-time"},"filled_amount":{"type":"number","format":"double"},"filled_at":{"type":["string","null"],"format":"date-time"},"id":{"type":"string","format":"uuid"},"order_type":{"$ref":"#/components/schemas/OrderType"},"price_per_kwh":{"type":"number","format":"double"},"side":{"$ref":"#/components/schemas/OrderSide"},"status":{"$ref":"#/components/schemas/OrderStatus"},"user_id":{"type":"string","format":"uuid"}}},"TradingStats":{"type":"object","description":"Get trading statistics for user\nGET /api/v1/trading/stats","required":["total_orders","active_orders","filled_orders","cancelled_orders"],"properties":{"active_orders":{"type":"integer","format":"int64"},"cancelled_orders":{"type":"integer","format":"int64"},"filled_orders":{"type":"integer","format":"int64"},"total_orders":{"type":"integer","format":"int64"}}},"TransactionQuery":{"type":"object","description":"Query parameters for transaction history","properties":{"end_time":{"type":["string","null"],"format":"date-time"},"limit":{"type":["integer","null"],"format":"int32"},"offset":{"type":["integer","null"],"format":"int32"},"program_id":{"type":["string","null"]},"start_time":{"type":["string","null"],"format":"date-time"},"status":{"type":["string","null"]}}},"TransactionResponse":{"type":"object","description":"Response for transaction submission","required":["signature","status","submitted_at","estimated_confirmation_time"],"properties":{"estimated_confirmation_time":{"type":"integer","format":"int32"},"signature":{"type":"string"},"status":{"type":"string"},"submitted_at":{"type":"string","format":"date-time"}}},"TransactionStatus":{"type":"object","required":["signature","status","confirmation_status","fee","logs","program_interactions"],"properties":{"block_height":{"type":["integer","null"],"format":"int64","minimum":0},"compute_units_consumed":{"type":["integer","null"],"format":"int32","minimum":0},"confirmation_status":{"type":"string"},"fee":{"type":"number","format":"double"},"logs":{"type":"array","items":{"type":"string"}},"program_interactions":{"type":"array","items":{"$ref":"#/components/schemas/ProgramInteraction"}},"signature":{"type":"string"},"status":{"type":"string"}}},"TransactionSubmission":{"type":"object","required":["transaction","program_id","priority_fee","compute_units"],"properties":{"compute_units":{"type":"integer","format":"int32","minimum":0},"priority_fee":{"type":"number","format":"double"},"program_id":{"type":"string"},"transaction":{"type":"string"}}},"UpdateProfileRequest":{"type":"object","description":"User profile update request","properties":{"email":{"type":["string","null"],"example":"john.doe@example.com"},"first_name":{"type":["string","null"],"example":"John"},"last_name":{"type":["string","null"],"example":"Doe"},"wallet_address":{"type":["string","null"],"example":"5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP8"}}},"UpdateUserRoleRequest":{"type":"object","description":"Request to update user role","required":["new_status"],"properties":{"new_status":{"$ref":"#/components/schemas/UserStatus"}}},"UpdateWalletRequest":{"type":"object","description":"Wallet address management request","required":["wallet_address"],"properties":{"verify_ownership":{"type":["boolean","null"]},"wallet_address":{"type":"string","example":"5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP8"}}},"User":{"type":"object","required":["id","username","role","department","blockchain_registered","created_at","updated_at"],"properties":{"blockchain_registered":{"type":"boolean"},"created_at":{"type":"string","format":"date-time"},"department":{"type":"string"},"email":{"type":["string","null"]},"id":{"type":"string","format":"uuid"},"role":{"$ref":"#/components/schemas/UserRole"},"updated_at":{"type":"string","format":"date-time"},"username":{"type":"string"},"wallet_address":{"type":["string","null"]}}},"UserActivity":{"type":"object","description":"User activity log entry","required":["id","user_id","action","created_at"],"properties":{"action":{"type":"string"},"created_at":{"type":"string","format":"date-time"},"details":{},"id":{"type":"string","format":"uuid"},"ip_address":{"type":["string","null"]},"user_agent":{"type":["string","null"]},"user_id":{"type":"string","format":"uuid"}}},"UserActivityResponse":{"type":"object","description":"User activity response","required":["activities","total"],"properties":{"activities":{"type":"array","items":{"$ref":"#/components/schemas/UserActivity"}},"total":{"type":"integer","format":"int64","minimum":0}}},"UserBalances":{"type":"object","required":["grid_tokens","pending_trades"],"properties":{"grid_tokens":{"type":"number","format":"double"},"pending_trades":{"type":"number","format":"double"}}},"UserInfo":{"type":"object","description":"User information for responses","required":["id","username","email","role","blockchain_registered"],"properties":{"blockchain_registered":{"type":"boolean"},"email":{"type":"string"},"id":{"type":"string","format":"uuid"},"role":{"type":"string"},"username":{"type":"string"},"wallet_address":{"type":["string","null"]}}},"UserListResponse":{"type":"object","description":"Paginated user response","required":["data","pagination"],"properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/UserInfo"}},"pagination":{"$ref":"#/components/schemas/PaginationMeta"}}},"UserProfile":{"type":"object","required":["user","balances","meter_assignments"],"properties":{"balances":{"$ref":"#/components/schemas/UserBalances"},"meter_assignments":{"type":"array","items":{"type":"string"}},"user":{"$ref":"#/components/schemas/User"}}},"UserRole":{"type":"string","enum":["User","Admin","Ami","Producer","Consumer"]},"UserSearchQuery":{"type":"object","description":"User search/filter query parameters","properties":{"page":{"type":"integer","format":"int32","description":"Page number (1-indexed)","minimum":0},"page_size":{"type":"integer","format":"int32","description":"Number of items per page (max 100)","minimum":0},"role":{"type":["string","null"],"description":"Filter by role"},"search":{"type":["string","null"],"description":"Search term for username, email, first name, or last name"},"sort_by":{"type":["string","null"],"description":"Sort field: \"created_at\", \"username\", \"email\""},"sort_order":{"$ref":"#/components/schemas/SortOrder","description":"Sort direction: \"asc\" or \"desc\""}}},"UserStatsResponse":{"type":"object","required":["total_readings","unminted_kwh","minted_kwh","total_kwh"],"properties":{"minted_kwh":{"type":"string"},"total_kwh":{"type":"string"},"total_readings":{"type":"integer","format":"int64"},"unminted_kwh":{"type":"string"}}},"UserStatus":{"type":"string","description":"User status enum matching the Registry program","enum":["active","suspended","inactive"]},"UserType":{"type":"string","description":"User type enum matching the Registry program","enum":["prosumer","consumer"]},"UserWalletInfo":{"type":"object","description":"User's wallet information (safe for production)","required":["address"],"properties":{"address":{"type":"string"},"balance_lamports":{"type":["integer","null"],"format":"int64","minimum":0},"balance_sol":{"type":["number","null"],"format":"double"}}},"VerifyEmailQuery":{"type":"object","required":["token"],"properties":{"token":{"type":"string","example":"5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP8"}}},"VerifyEmailResponse":{"type":"object","required":["message","email_verified","verified_at","wallet_address"],"properties":{"auth":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/SecureAuthResponse"}]},"email_verified":{"type":"boolean"},"message":{"type":"string"},"verified_at":{"type":"string"},"wallet_address":{"type":"string"}}},"WalletLoginResponse":{"type":"object","description":"Login response with wallet information","required":["access_token","token_type","expires_in","user"],"properties":{"access_token":{"type":"string"},"expires_in":{"type":"integer","format":"int64","minimum":0},"token_type":{"type":"string"},"user":{"$ref":"#/components/schemas/SecureUserInfo"},"wallet_info":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/UserWalletInfo"}]}}},"WalletRegistrationRequest":{"type":"object","description":"Enhanced registration request with wallet creation option","required":["username","email","password","role","first_name","last_name"],"properties":{"airdrop_amount":{"type":["number","null"],"format":"double","description":"Amount of SOL to airdrop (development only)"},"create_wallet":{"type":["boolean","null"],"description":"Create a new Solana wallet for this user"},"email":{"type":"string"},"first_name":{"type":"string"},"last_name":{"type":"string"},"password":{"type":"string"},"role":{"type":"string"},"username":{"type":"string"},"wallet_address":{"type":["string","null"],"description":"Optional manual wallet address (if not creating new one)"}}},"WalletRegistrationResponse":{"type":"object","description":"Response with wallet information for development","required":["access_token","token_type","expires_in","user"],"properties":{"access_token":{"type":"string"},"expires_in":{"type":"integer","format":"int64","minimum":0},"token_type":{"type":"string"},"user":{"$ref":"#/components/schemas/SecureUserInfo"},"wallet_info":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/DevWalletInfo"}]}}},"WsMessage":{"oneOf":[{"type":"object","description":"Order book update","required":["epoch_number","buys","sells","timestamp","type"],"properties":{"buys":{"type":"array","items":{"$ref":"#/components/schemas/OrderBookEntry"}},"epoch_number":{"type":"integer","format":"int32"},"sells":{"type":"array","items":{"$ref":"#/components/schemas/OrderBookEntry"}},"timestamp":{"type":"string","format":"date-time"},"type":{"type":"string","enum":["OrderBookUpdate"]}}},{"type":"object","description":"Order status update","required":["order_id","status","timestamp","type"],"properties":{"order_id":{"type":"string","format":"uuid"},"status":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"type":{"type":"string","enum":["OrderUpdate"]}}},{"type":"object","description":"New match notification","required":["match_id","buy_order_id","sell_order_id","matched_amount","match_price","timestamp","type"],"properties":{"buy_order_id":{"type":"string","format":"uuid"},"match_id":{"type":"string","format":"uuid"},"match_price":{"type":"string"},"matched_amount":{"type":"string"},"sell_order_id":{"type":"string","format":"uuid"},"timestamp":{"type":"string","format":"date-time"},"type":{"type":"string","enum":["MatchNotification"]}}},{"type":"object","description":"Epoch transition notification","required":["old_epoch","new_epoch","total_volume","timestamp","type"],"properties":{"clearing_price":{"type":["string","null"]},"new_epoch":{"type":"integer","format":"int32"},"old_epoch":{"type":"integer","format":"int32"},"timestamp":{"type":"string","format":"date-time"},"total_volume":{"type":"string"},"type":{"type":"string","enum":["EpochTransition"]}}},{"type":"object","description":"Error message","required":["code","message","timestamp","type"],"properties":{"code":{"type":"string"},"message":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"type":{"type":"string","enum":["Error"]}}},{"type":"object","description":"Ping message for connection health","required":["timestamp","type"],"properties":{"timestamp":{"type":"string","format":"date-time"},"type":{"type":"string","enum":["Ping"]}}},{"type":"object","description":"Pong response","required":["timestamp","type"],"properties":{"timestamp":{"type":"string","format":"date-time"},"type":{"type":"string","enum":["Pong"]}}}],"description":"WebSocket message types"},"WsParams":{"type":"object","description":"WebSocket connection parameters","properties":{"channels":{"type":["string","null"],"description":"Subscribe to specific channels (comma-separated)"},"epoch":{"type":["integer","null"],"format":"int32","description":"Subscribe to specific epoch"},"token":{"type":["string","null"],"description":"Authentication token"}}}},"securitySchemes":{"bearer_auth":{"type":"http","scheme":"bearer","bearerFormat":"JWT","description":"Enter your JWT token"}}},"tags":[{"name":"health","description":"Health check endpoints"},{"name":"auth","description":"Authentication and authorization"},{"name":"users","description":"User management"},{"name":"blockchain","description":"Blockchain interaction"},{"name":"blockchain-test","description":"Blockchain testing utilities"},{"name":"trading","description":"Energy trading operations"},{"name":"meters","description":"Smart meter readings"},{"name":"erc","description":"Energy Renewable Certificates"},{"name":"tokens","description":"Token operations"},{"name":"oracle","description":"Oracle price feeds"},{"name":"governance","description":"Governance operations"},{"name":"websocket","description":"WebSocket real-time data streams"},{"name":"Admin - Market","description":"Market health monitoring and control (admin only)"}]}