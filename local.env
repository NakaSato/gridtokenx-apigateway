# =========================================================================
# API Gateway Environment Configuration
# =========================================================================
# This file documents all required and optional environment variables
# for the API Gateway service. Copy this to .env and customize values.
# Updated: November 1, 2025

# =========================================================================
# APPLICATION CONFIGURATION
# =========================================================================
TEST_MODE=true

# Environment: development, staging, or production
ENVIRONMENT=development

# Port the API Gateway will listen on
PORT=8080

# Logging level: trace, debug, info, warn, error
LOG_LEVEL=info

# Enable audit logging for all API requests
AUDIT_LOG_ENABLED=true

# =========================================================================
# DATABASE CONFIGURATION
# =========================================================================
# PostgreSQL Database (Main application database)
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://gridtokenx_user:gridtokenx_password@localhost:5432/gridtokenx

# InfluxDB (Time-Series Database)
# Can be a PostgreSQL URL or InfluxDB URL
# Optional: Defaults to http://localhost:8086 if not set
INFLUXDB_URL=http://localhost:8086

# =========================================================================
# CACHE CONFIGURATION
# =========================================================================
# Redis connection string
# Format: redis://[:password]@host:port
REDIS_URL=redis://:redis_dev_password@localhost:6379

# Redis connection pool size
REDIS_POOL_SIZE=20

# =========================================================================
# DATABASE CONNECTION POOL
# =========================================================================
# Maximum number of database connections
MAX_CONNECTIONS=50

# =========================================================================
# BLOCKCHAIN CONFIGURATION (SOLANA)
# =========================================================================
# Solana JSON RPC endpoint
SOLANA_RPC_URL=http://localhost:8899

# Solana WebSocket endpoint
SOLANA_WS_URL=ws://localhost:8900

# =========================================================================
# AUTHENTICATION CONFIGURATION
# =========================================================================
# JWT Secret key for signing and verifying tokens
# IMPORTANT: Change this value in production!
# Should be a long random string (minimum 32 characters)
JWT_SECRET=dev-jwt-secret-key-minimum-32-characters-long-for-development-2025

# Engineering API key for protected endpoints
# Used for validating requests from the engineering department
ENGINEERING_API_KEY=engineering-department-api-key-2025

# =========================================================================
# EMAIL CONFIGURATION
# =========================================================================
# SMTP Configuration for Email Verification (MailHog for development)
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USERNAME=
SMTP_PASSWORD=

# Email sender details
EMAIL_FROM_NAME="GridTokenX Platform"
EMAIL_FROM_ADDRESS=noreply@gridtokenx.com

# Email verification settings
EMAIL_VERIFICATION_EXPIRY_HOURS=24
EMAIL_VERIFICATION_BASE_URL=http://localhost:3000

# Feature flags
EMAIL_VERIFICATION_REQUIRED=false  # Disabled for integration testing
EMAIL_VERIFICATION_ENABLED=true

EMAIL_AUTO_LOGIN_AFTER_VERIFICATION=true  # Return JWT after verification
JWT_EXPIRATION=86400                       # 24 hours in seconds

# =========================================================================
# REQUEST HANDLING CONFIGURATION
# =========================================================================
# Request timeout in seconds
REQUEST_TIMEOUT=30

# Rate limiting window in seconds
RATE_LIMIT_WINDOW=60

# =========================================================================
# NOTES
# =========================================================================
# 1. DATABASE_URL is REQUIRED
#    - Must be a valid PostgreSQL connection string
#    - Format: postgresql://user:password@host:port/database
#
# 2. INFLUXDB_URL is OPTIONAL
#    - Defaults to http://localhost:8086 if not provided
#    - Used for time-series data storage
#
# 3. REDIS_URL is REQUIRED
#    - Used for caching and session management
#    - Format: redis://[:password]@host:port
#
# 4. JWT_SECRET is REQUIRED
#    - Must be changed from the default in production
#    - Use a strong random string
#
# 5. SOLANA URLs are REQUIRED
#    - For local development: Use local validator
#    - For devnet: https://api.devnet.solana.com
#    - For mainnet-beta: https://api.mainnet-beta.solana.com
#
# 6. All numeric values should be valid integers
#    - MAX_CONNECTIONS: 10-100 (recommended 50)
#    - REDIS_POOL_SIZE: 5-50 (recommended 20)
#    - REQUEST_TIMEOUT: 10-300 (seconds)
#    - RATE_LIMIT_WINDOW: 1-3600 (seconds)API_KEY_SECRET=test-api-key-secret-for-development

# API Key for service-to-service authentication
API_KEY_SECRET=test-api-key-secret-for-development-and-testing
