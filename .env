# =========================================================================
# GridTokenX API Gateway - Environment Configuration
# =========================================================================
# This file contains the environment variables required for the API gateway
# DO NOT commit this file with sensitive data to version control
# =========================================================================

# =========================================================================
# APPLICATION CONFIGURATION
# =========================================================================
ENVIRONMENT=development
SERVER_HOST=0.0.0.0
SERVER_PORT=8080
PORT=8080
RUST_LOG=info
LOG_LEVEL=info
LOG_FORMAT=json
REQUEST_TIMEOUT=30

# =========================================================================
# DATABASE CONFIGURATION
# =========================================================================
DATABASE_URL=postgresql://gridtokenx_user:gridtokenx_password@localhost:5432/gridtokenx
MAX_CONNECTIONS=50
MIN_CONNECTIONS=5

# =========================================================================
# REDIS CONFIGURATION
# =========================================================================
REDIS_URL=redis://localhost:6379
REDIS_POOL_SIZE=20
REDIS_MAX_CONNECTIONS=20
REDIS_CONNECTION_TIMEOUT=5
REDIS_COMMAND_TIMEOUT=3

# =========================================================================
# INFLUXDB CONFIGURATION
# =========================================================================
INFLUXDB_URL=http://localhost:8086
INFLUXDB_TOKEN=your-influxdb-token
INFLUXDB_ORG=gridtokenx
INFLUXDB_BUCKET=energy_readings

# =========================================================================
# SOLANA BLOCKCHAIN CONFIGURATION
# =========================================================================
SOLANA_RPC_URL=http://localhost:8899
SOLANA_WS_URL=ws://localhost:8900
SOLANA_CLUSTER=localnet

# Program IDs (from Anchor.toml - localnet)
REGISTRY_PROGRAM_ID=FQYhgNRRWDCvy9WPeZPo5oZw63iHpJZToi1uUp25jE4a
ENERGY_TOKEN_PROGRAM_ID=9sAB52aZ71ciGhaVwuCg6ohTeWu8H6fDb2B29ohxsFVp
TRADING_PROGRAM_ID=9t3s8sCgVUG9kAgVPsozj8mDpJp9cy6SF5HwRK5nvAHb
ORACLE_PROGRAM_ID=HtV8jTeaCVXKZVCQQVWjXcAvmiF6id9QSLVGP5MT5osX
GOVERNANCE_PROGRAM_ID=4D9Mydr4f3BEiDoKxE2V8yMZBj53X6nxMjMWaNPAQKrN

# Token Configuration
ENERGY_TOKEN_MINT=AMTdVA64nmia6JaVC9ouDzUrvdwSviCoYhsSs6PRuVT1

# =========================================================================
# AUTHENTICATION & SECURITY
# =========================================================================
JWT_SECRET=dev-jwt-secret-key-minimum-32-characters-long-for-development-2025
JWT_EXPIRATION=86400
API_KEY_SECRET=test-api-key-secret-for-development-and-testing
ENGINEERING_API_KEY=engineering-department-api-key-2025
HMAC_SECRET=hmac-signature-secret-change-in-production

# Password Requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL_CHARS=true

# Security Settings
SECURE_COOKIES=false
SESSION_TIMEOUT=3600
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=900

# =========================================================================
# EMAIL CONFIGURATION (MailHog/Mailpit)
# =========================================================================
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USERNAME=
SMTP_PASSWORD=
EMAIL_FROM_NAME="GridTokenX"
EMAIL_FROM_ADDRESS=noreply@gridtokenx.com
EMAIL_VERIFICATION_ENABLED=true
EMAIL_VERIFICATION_REQUIRED=false
EMAIL_VERIFICATION_EXPIRY_HOURS=24
EMAIL_VERIFICATION_BASE_URL=http://localhost:3000
EMAIL_AUTO_LOGIN_AFTER_VERIFICATION=true

# =========================================================================
# CORS CONFIGURATION
# =========================================================================
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=*
CORS_EXPOSE_HEADERS=*
CORS_MAX_AGE=3600

# =========================================================================
# RATE LIMITING
# =========================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW=60
RATE_LIMIT_AUTH_REQUESTS=10
RATE_LIMIT_AUTH_WINDOW=60
RATE_LIMIT_TRADING_REQUESTS=20
RATE_LIMIT_TRADING_WINDOW=60

# =========================================================================
# MONITORING & OBSERVABILITY
# =========================================================================
AUDIT_LOG_ENABLED=true
ENABLE_METRICS=true
ENABLE_TRACING=true
PROMETHEUS_METRICS_ENABLED=true
METRICS_PORT=9090

# =========================================================================
# FEATURE FLAGS
# =========================================================================
ENABLE_WEBSOCKET=true
ENABLE_BLOCKCHAIN_INTEGRATION=true
ENABLE_PUSH_NOTIFICATIONS=false
ENABLE_SMS_NOTIFICATIONS=false
ENABLE_MARKET_DYNAMICS=true

# =========================================================================
# TOKENIZATION CONFIGURATION
# =========================================================================
TOKENIZATION_KWH_TO_TOKEN_RATIO=1.0
TOKENIZATION_DECIMALS=9
TOKENIZATION_MAX_READING_KWH=100.0
TOKENIZATION_READING_MAX_AGE_DAYS=7
TOKENIZATION_AUTO_MINT_ENABLED=true
TOKENIZATION_POLLING_INTERVAL_SECS=60
TOKENIZATION_BATCH_SIZE=50
TOKENIZATION_MAX_RETRY_ATTEMPTS=3
TOKENIZATION_INITIAL_RETRY_DELAY_SECS=300
TOKENIZATION_RETRY_BACKOFF_MULTIPLIER=2.0
TOKENIZATION_MAX_RETRY_DELAY_SECS=3600
TOKENIZATION_TRANSACTION_TIMEOUT_SECS=60
TOKENIZATION_MAX_TRANSACTIONS_PER_BATCH=20
TOKENIZATION_ENABLE_REAL_BLOCKCHAIN=true

# =========================================================================
# EVENT PROCESSOR CONFIGURATION
# =========================================================================
EVENT_PROCESSOR_ENABLED=true
EVENT_PROCESSOR_POLLING_INTERVAL_SECS=10
EVENT_PROCESSOR_BATCH_SIZE=100
EVENT_PROCESSOR_MAX_RETRIES=3

# =========================================================================
# WEBSOCKET CONFIGURATION
# =========================================================================
WS_ENABLED=true
WS_HOST=localhost
WS_PORT=8765

# =========================================================================
# KEY PATHS (for blockchain operations)
# =========================================================================
AUTHORITY_WALLET_PATH=./dev-wallet.json
ENGINEERING_KEYPAIR_PATH=./validator-keys/engineering-keypair.json
ORACLE_KEYPAIR_PATH=./validator-keys/oracle-keypair.json
ENGINEERING_DEPT_KEYPAIR_PATH=./validator-keys/engineering-department-authority.json

# =========================================================================
# ORACLE & REC CONFIGURATION
# =========================================================================
PROCESSING_INTERVAL=900
ENGINEERING_AUTHORITY=true
REC_AUTHORITY_ONLY=true
REC_ISSUING_AUTHORITY=engineering-department
REC_CERTIFICATION_ENABLED=true
CARBON_OFFSET_RATE=0.7

# =========================================================================
# TEST MODE
# =========================================================================
TEST_MODE=true